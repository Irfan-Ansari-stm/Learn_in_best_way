```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 19: Performance and Optimization</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        :root {
            --bg-dark: #0a192f;
            --cyan: #00d1ff;
            --amber: #ffb347;
            --text-light: #e6f1ff;
            --text-secondary: #b8c6d8;
            --card-bg: #112240;
            --border-color: #2a4a6e;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-light);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden;
        }

        .left-panel {
            background-color: var(--card-bg);
            border-right: 1px solid var(--border-color);
            height: 100vh;
            position: fixed;
            width: 300px;
            overflow-y: auto;
            padding: 1rem;
            box-shadow: 2px 0 10px rgba(0, 209, 255, 0.1);
        }

        .right-panel {
            margin-left: 300px;
            padding: 2rem;
            overflow-y: auto;
            max-height: 100vh;
            height: 100vh;
        }

        .section-title {
            color: var(--cyan);
            border-bottom: 2px solid var(--amber);
            padding-bottom: 0.5rem;
            margin-top: 2rem;
            margin-bottom: 1.5rem;
            font-weight: 600;
        }

        .subsection-title {
            color: var(--amber);
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            padding-left: 0.5rem;
            border-left: 3px solid var(--cyan);
        }

        .toc-item {
            margin: 0.5rem 0;
            transition: all 0.3s ease;
        }

        .toc-item a {
            color: var(--text-secondary);
            text-decoration: none;
            display: block;
            padding: 0.3rem 0.5rem;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        .toc-item a:hover {
            background-color: rgba(0, 209, 255, 0.1);
            color: var(--cyan);
        }

        .toc-item.active a {
            color: var(--cyan);
            background-color: rgba(0, 209, 255, 0.15);
        }

        .toc-heading {
            color: var(--cyan);
            font-weight: 600;
            margin: 1rem 0 0.5rem 0;
            cursor: pointer;
            display: flex;
            align-items: center;
        }

        .toc-heading i {
            margin-right: 0.5rem;
            transition: transform 0.3s;
        }

        .toc-heading.collapsed i {
            transform: rotate(-90deg);
        }

        pre code {
            background-color: #0d1b2a !important;
            color: var(--text-light) !important;
            padding: 1rem;
            border-radius: 6px;
            overflow-x: auto;
            border-left: 3px solid var(--amber);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        code {
            background-color: rgba(13, 27, 42, 0.8);
            color: var(--amber);
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-family: 'Courier New', Courier, monospace;
        }

        details {
            margin: 1.2rem 0;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
            background-color: rgba(17, 34, 64, 0.5);
        }

        summary {
            padding: 0.8rem 1rem;
            background-color: var(--card-bg);
            color: var(--cyan);
            font-weight: 600;
            cursor: pointer;
            list-style: none;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        summary::-webkit-details-marker {
            display: none;
        }

        summary::before {
            content: "+";
            color: var(--amber);
            margin-right: 0.5rem;
            font-weight: bold;
            font-size: 1.2rem;
        }

        details[open] summary::before {
            content: "‚àí";
        }

        .control-buttons {
            margin-bottom: 1.5rem;
            display: flex;
            gap: 0.5rem;
        }

        .control-btn {
            background-color: var(--card-bg);
            border: 1px solid var(--amber);
            color: var(--amber);
            padding: 0.4rem 0.8rem;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .control-btn:hover {
            background-color: var(--amber);
            color: var(--bg-dark);
        }

        .highlight {
            background-color: rgba(255, 179, 71, 0.1);
            border-left: 4px solid var(--amber);
            padding: 0.8rem 1rem;
            margin: 1rem 0;
            border-radius: 0 4px 4px 0;
        }

        .formula {
            background-color: rgba(0, 209, 255, 0.1);
            border: 1px dashed var(--cyan);
            padding: 0.8rem;
            border-radius: 6px;
            margin: 1rem 0;
            font-family: 'Cambria Math', serif;
            text-align: center;
            color: var(--cyan);
        }

        .example-box {
            background-color: rgba(10, 25, 47, 0.7);
            border: 1px solid var(--cyan);
            border-radius: 6px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .badge {
            background-color: var(--amber);
            color: var(--bg-dark);
            font-size: 0.8rem;
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
            margin-left: 0.5rem;
        }

        .performance-chart {
            background-color: rgba(17, 34, 64, 0.7);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
            margin: 1.5rem 0;
            font-family: monospace;
            white-space: nowrap;
            overflow-x: auto;
        }

        .search-input {
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--border-color);
            color: var(--text-light);
            margin-bottom: 1rem;
            padding: 0.5rem;
            border-radius: 4px;
        }

        @media (max-width: 991px) {
            .left-panel {
                width: 100%;
                height: auto;
                position: relative;
            }
            .right-panel {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container-fluid p-0">
        <div class="row g-0">
            <!-- Left Panel -->
            <div class="col-md-3 left-panel">
                <div class="text-center mb-4">
                    <h3 class="text-cyan">Module 19</h3>
                    <h5 class="text-amber">Performance and Optimization</h5>
                    <p class="text-secondary">Master the art of blazing-fast web experiences</p>
                    <small class="text-muted">By CSS Mastery Tutor</small>
                </div>

                <div class="control-buttons">
                    <button id="expandAll" class="control-btn"><i class="bi bi-plus-circle"></i> Expand All</button>
                    <button id="collapseAll" class="control-btn"><i class="bi bi-dash-circle"></i> Collapse All</button>
                </div>

                <input type="text" class="form-control search-input" id="tocSearch" placeholder="Search topics...">

                <div class="toc-section">
                    <div class="toc-heading" data-target="section-19-1">
                        <span>19.1 CSS Performance Fundamentals</span>
                        <i class="bi bi-chevron-down"></i>
                    </div>
                    <div class="toc-subitems" id="section-19-1">
                        <div class="toc-item">
                            <a href="#render-blocking-css">Render-blocking CSS</a>
                        </div>
                        <div class="toc-item">
                            <a href="#critical-rendering-path">Critical rendering path</a>
                        </div>
                        <div class="toc-item">
                            <a href="#css-loading-strategies">CSS loading strategies</a>
                        </div>
                        <div class="toc-item">
                            <a href="#font-loading-optimization">Font loading optimization</a>
                        </div>
                    </div>

                    <div class="toc-heading" data-target="section-19-2">
                        <span>19.2 CSS Optimization Techniques</span>
                        <i class="bi bi-chevron-down"></i>
                    </div>
                    <div class="toc-subitems" id="section-19-2">
                        <div class="toc-item">
                            <a href="#selector-performance">Selector performance</a>
                        </div>
                        <div class="toc-item">
                            <a href="#reflow-repaint-optimization">Reflow and repaint optimization</a>
                        </div>
                        <div class="toc-item">
                            <a href="#css-animation-performance">CSS animation performance</a>
                        </div>
                        <div class="toc-item">
                            <a href="#memory-usage">Memory usage considerations</a>
                        </div>
                    </div>

                    <div class="toc-heading" data-target="section-19-3">
                        <span>19.3 Core Web Vitals and CSS</span>
                        <i class="bi bi-chevron-down"></i>
                    </div>
                    <div class="toc-subitems" id="section-19-3">
                        <div class="toc-item">
                            <a href="#lcp-optimization">Largest Contentful Paint (LCP) optimization</a>
                        </div>
                        <div class="toc-item">
                            <a href="#cls-prevention">Cumulative Layout Shift (CLS) prevention</a>
                        </div>
                        <div class="toc-item">
                            <a href="#fid-and-css">First Input Delay (FID) and CSS</a>
                        </div>
                        <div class="toc-item">
                            <a href="#measuring-css-performance">Measuring and monitoring CSS performance</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel -->
            <div class="col-md-9 right-panel">
                <h1 class="text-center mb-5 text-cyan">Module 19: Performance and Optimization</h1>
                <p class="text-secondary text-center mb-5">Transform your websites from slow to lightning-fast with CSS optimization mastery</p>

                <!-- 19.1 CSS Performance Fundamentals -->
                <section id="section-19-1">
                    <h2 class="section-title">19.1 CSS Performance Fundamentals</h2>
                    <p class="text-secondary">CSS is often the biggest bottleneck in page load performance. Understanding how browsers process CSS is essential for creating fast experiences.</p>

                    <details>
                        <summary>Definition: What is Render-Blocking CSS?</summary>
                        <p>Render-blocking CSS refers to CSS files that prevent the browser from displaying content until they are fully downloaded and parsed.</p>
                        <p>Why this matters:</p>
                        <ul>
                            <li>Browsers build a CSSOM (CSS Object Model) before rendering</li>
                            <li>HTML parsing pauses while waiting for CSS</li>
                            <li>This creates a "flash of unstyled content" (FOUC) or blank screen</li>
                        </ul>
                        <p><strong>Analogy:</strong> Imagine building a house - you can't install windows until the walls are built. CSS is the blueprint for your visual structure!</p>
                    </details>

                    <details>
                        <summary>Syntax: Critical Rendering Path Explained</summary>
                        <p>The critical rendering path is the sequence of steps browsers follow to render a page:</p>
                        <ol>
                            <li>HTML ‚Üí DOM (Document Object Model)</li>
                            <li>CSS ‚Üí CSSOM (CSS Object Model)</li>
                            <li>DOM + CSSOM ‚Üí Render Tree</li>
                            <li>Render Tree ‚Üí Layout ‚Üí Paint ‚Üí Composite</li>
                        </ol>
                        <pre><code>&lt;!-- BAD: Render-blocking CSS --&gt;
&lt;link rel="stylesheet" href="styles.css"&gt;

&lt;!-- GOOD: Non-render-blocking CSS --&gt;
&lt;link rel="preload" as="style" href="non-critical.css" onload="this.onload=null;this.rel='stylesheet'"/&gt;
&lt;noscript&gt;&lt;link rel="stylesheet" href="non-critical.css"&gt;&lt;/noscript&gt;

&lt;!-- Critical CSS inlined --&gt;
&lt;style&gt;
/* Above-the-fold styles only */
header { background: #00d1ff; }
.hero { padding: 4rem; }
&lt;/style&gt;</code></pre>
                        <p>The key insight: The browser won't render anything visible until it has both DOM AND CSSOM.</p>
                    </details>

                    <details>
                        <summary>Example: CSS Loading Strategies Comparison</summary>
                        <div class="example-box">
                            <pre><code>// Strategy 1: Traditional (SLOW)
&lt;link rel="stylesheet" href="all-styles.css"&gt;

// Strategy 2: Preload + Async (FAST)
&lt;!-- Critical CSS in head --&gt;
&lt;style&gt;
.header, .hero, .nav { /* ... */ }
&lt;/style&gt;

&lt;!-- Non-critical CSS loaded asynchronously --&gt;
&lt;link rel="preload" as="style" href="secondary.css" onload="this.onload=null;this.rel='stylesheet'"&gt;
&lt;link rel="stylesheet" href="secondary.css" media="print" onload="this.media='all'"/&gt;

// Strategy 3: CSS-in-JS with code-splitting (MODERN)
import './styles.css'; // Dynamically imported when component mounts

// Strategy 4: Server-side critical CSS extraction
// Using tools like Critters or Penthouse</code></pre>
                        </div>
                        <p>Performance impact:</p>
                        <div class="performance-chart">
                            Traditional: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%<br>
                            Preload+Async: ‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 25%<br>
                            Critical CSS: ‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 15%
                        </div>
                        <p>Result: Users see content 3-5x faster with optimized loading!</p>
                    </details>

                    <details>
                        <summary>Detail: Font Loading Optimization</summary>
                        <p>Web fonts are notorious for causing layout shifts and delays. Here's how to optimize:</p>
                        <pre><code>&lt;!-- Optimal font loading --&gt;
&lt;link rel="preload" as="font" href="inter.woff2" type="font/woff2" crossorigin&gt;

&lt;style&gt;
@font-face {
  font-family: 'Inter';
  src: url('inter.woff2') format('woff2');
  font-display: swap; /* üëà CRITICAL! */
  font-weight: 400;
}

body {
  font-family: Inter, system-ui, sans-serif;
}
&lt;/style&gt;</code></pre>
                        <p><strong>font-display values explained:</strong></p>
                        <table class="table table-dark table-sm mt-2">
                            <thead>
                                <tr>
                                    <th>Value</th>
                                    <th>Behavior</th>
                                    <th>Best For</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td><code>auto</code></td><td>Browser default (often blocks)</td><td>‚ùå Avoid</td></tr>
                                <tr><td><code>block</code></td><td>Blocks text for ~3s, then swaps</td><td>‚ùå Rarely</td></tr>
                                <tr><td><code>swap</code></td><td>Shows fallback immediately, swaps when loaded</td><td>‚úÖ Most cases</td></tr>
                                <tr><td><code>fallback</code></td><td>Short block (~100ms), then swap</td><td>‚úÖ Good balance</td></tr>
                                <tr><td><code>optional</code></td><td>Very short block, may never swap</td><td>‚úÖ For non-critical text</td></tr>
                            </tbody>
                        </table>
                        <p>Always use <code>font-display: swap</code> unless you have a specific reason not to!</p>
                        <p>Also preload your most important fonts (usually heading fonts) using <code>rel="preload"</code>.</p>
                    </details>

                    <details>
                        <summary>Uses: Why These Fundamentals Matter</summary>
                        <ul>
                            <li><strong>SEO Impact</strong>: Google ranks faster sites higher</li>
                            <li><strong>User Retention</strong>: 53% of mobile users abandon sites taking >3s to load</li>
                            <li><strong>Conversion Rates</strong>: Every 1s delay reduces conversions by 7%</li>
                            <li><strong>Accessibility</strong>: Faster sites work better on low-end devices</li>
                            <li><strong>Core Web Vitals</strong>: Directly impacts LCP, CLS, FID scores</li>
                        </ul>
                        <p class="badge">Pro Tip: Use Chrome DevTools ‚Üí Network tab ‚Üí "Disable cache" + "Slow 3G" to simulate real-world conditions!</p>
                    </details>
                </section>

                <!-- 19.2 CSS Optimization Techniques -->
                <section id="section-19-2">
                    <h2 class="section-title">19.2 CSS Optimization Techniques</h2>
                    <p class="text-secondary">Beyond loading, CSS itself can be optimized at the selector level, animation level, and memory usage level.</p>

                    <details>
                        <summary>Syntax: Selector Performance</summary>
                        <p>Not all CSS selectors are created equal. Some trigger expensive browser recalculations.</p>
                        <pre><code>// ‚úÖ FAST: Simple, efficient selectors
.button { ... }
.nav li { ... }
.card h2 { ... }

// ‚ùå SLOW: Complex, expensive selectors
div[class*="container"] { ... } /* Attribute selector */
.container > *:nth-child(odd) { ... } /* Complex pseudo-class */
#header .menu ul li a:hover { ... } /* Deep nesting */

// ‚ùå WORST: Universal and overly broad
* { margin: 0; } /* Universal selector */
.container div span { ... } /* Too generic */
[class^="btn-"] { ... } /* Starts-with attribute selector */</code></pre>
                        <p><strong>Performance ranking (fastest to slowest):</strong></p>
                        <ol>
                            <li>ID selectors (<code>#id</code>)</li>
                            <li>Class selectors (<code>.class</code>)</li>
                            <li>Type selectors (<code>div</code>, <code>p</code>)</li>
                            <li>Attribute selectors (<code>[type="text"]</code>)</li>
                            <li>Pseudo-classes (<code>:hover</code>, <code>:nth-child()</code>)</li>
                            <li>Pseudo-elements (<code>::before</code>, <code>::after</code>)</li>
                            <li>Universal selector (<code>*</code>)</li>
                        </ol>
                        <p>Rule of thumb: Keep specificity low and avoid complex combinators.</p>
                    </details>

                    <details>
                        <summary>Detail: Reflow and Repaint Optimization</summary>
                        <p>When CSS changes, browsers perform two expensive operations:</p>
                        <ul>
                            <li><strong>Reflow</strong>: Recalculating element positions and sizes (most expensive)</li>
                            <li><strong>Repaint</strong>: Redrawing pixels without layout changes</li>
                        </ul>
                        <p>Triggers for reflow:</p>
                        <pre><code>// These cause reflow:
element.style.width = '200px';     // Size change
element.style.left = '100px';      // Position change
element.textContent = 'new text';  // Content change
window.resize;                     // Window resize
getComputedStyle(element).height;  // Reading layout property</code></pre>
                        <p>Optimization techniques:</p>
                        <ol>
                            <li><strong>Batch DOM changes</strong>: Change multiple properties at once</li>
                            <li><strong>Use transform and opacity</strong>: These trigger GPU acceleration</li>
                            <li><strong>Avoid forcing layout reads</strong>: Don't read layout properties between writes</li>
                            <li><strong>Use CSS animations</strong>: Instead of JavaScript-based animations</li>
                        </ol>
                        <div class="highlight">
                            <p><strong>Anti-pattern:</strong></p>
                            <pre><code>// This forces 3 reflows!
el.style.width = '200px';
let width = el.offsetWidth; // READ forces reflow
el.style.height = '100px';
let height = el.offsetHeight; // READ forces reflow
el.style.top = '50px';</code></pre>
                        </div>
                        <div class="highlight">
                            <p><strong>Optimized pattern:</strong></p>
                            <pre><code>// Single batch operation
el.classList.add('animate'); // Apply all styles at once

// Or use CSS transitions
.animate {
  width: 200px;
  height: 100px;
  top: 50px;
  transition: all 0.3s ease;
}</code></pre>
                        </div>
                    </details>

                    <details>
                        <summary>Syntax: CSS Animation Performance</summary>
                        <p>Not all CSS animations are created equal. Some cause jank and poor performance.</p>
                        <pre><code>// ‚ùå BAD: Animating properties that trigger reflow
.element {
  transition: width 0.3s ease;
  transition: height 0.3s ease;
  transition: left 0.3s ease;
  transition: top 0.3s ease;
}

// ‚úÖ GOOD: Animating properties that trigger only composite
.element {
  transition: transform 0.3s ease;
  transition: opacity 0.3s ease;
  transition: filter 0.3s ease;
}

// Best practice: Use will-change for hinting
.element {
  will-change: transform;
  transform: translateX(0);
  opacity: 1;
}

// When animating, use transform instead of changing position
// BAD:
.element {
  left: 100px;
}

// GOOD:
.element {
  transform: translateX(100px);
}</code></pre>
                        <p><strong>Why transform and opacity?</strong> They're handled by the compositor thread, not the main thread.</p>
                        <p>They don't trigger reflow or repaint ‚Äî just GPU-accelerated composition!</p>
                    </details>

                    <details>
                        <summary>Example: Animation Performance Comparison</summary>
                        <div class="example-box">
                            <pre><code>&lt;!-- HTML --&gt;
&lt;div class="bad-animation"&gt;Bad Animation&lt;/div&gt;
&lt;div class="good-animation"&gt;Good Animation&lt;/div&gt;

&lt;!-- CSS --&gt;
.bad-animation {
  position: relative;
  width: 100px;
  height: 100px;
  background: #00d1ff;
  animation: moveLeft 2s infinite alternate;
}

@keyframes moveLeft {
  from { left: 0; }
  to { left: 300px; }
}

.good-animation {
  width: 100px;
  height: 100px;
  background: #ffb347;
  animation: slideRight 2s infinite alternate;
  will-change: transform;
}

@keyframes slideRight {
  from { transform: translateX(0); }
  to { transform: translateX(300px); }
}</code></pre>
                        </div>
                        <p>Test this in Chrome DevTools ‚Üí Performance tab:</p>
                        <ul>
                            <li>Bad animation: Shows red bars (re-layouts)</li>
                            <li>Good animation: Shows green bars (only composition)</li>
                        </ul>
                        <p>Result: Good animation uses 80% less CPU and runs at 60fps even on low-end devices!</p>
                    </details>

                    <details>
                        <summary>Detail: Memory Usage Considerations</summary>
                        <p>Large CSS files and excessive animations consume memory:</p>
                        <ul>
                            <li>Each CSS rule takes up memory in the CSSOM</li>
                            <li>Complex animations create off-screen buffers</li>
                            <li>Unused styles remain in memory</li>
                        </ul>
                        <p>Optimization strategies:</p>
                        <ol>
                            <li><strong>Remove unused CSS</strong>: Use PurgeCSS or similar tools</li>
                            <li><strong>Limit animation duration</strong>: Shorter animations = less memory</li>
                            <li><strong>Use transform layers wisely</strong>: Each animated element creates a layer</li>
                            <li><strong>Avoid large background images</strong>: Use gradients or SVG where possible</li>
                            <li><strong>Limit box-shadow complexity</strong>: Multiple shadows are expensive</li>
                        </ol>
                        <pre><code>// ‚ùå Memory-heavy
.card {
  box-shadow: 
    0 10px 30px rgba(0,0,0,0.2),
    0 5px 15px rgba(0,0,0,0.1),
    inset 0 1px 3px rgba(0,0,0,0.1),
    inset 0 -1px 3px rgba(0,0,0,0.05);
}

// ‚úÖ Optimized
.card {
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}</code></pre>
                        <p>Remember: Every pixel counts on mobile devices with limited RAM!</p>
                    </details>

                    <details>
                        <summary>Uses: When to Apply These Techniques</summary>
                        <ul>
                            <li><strong>High-traffic websites</strong>: Every millisecond affects revenue</li>
                            <li><strong>E-commerce platforms</strong>: Faster = more conversions</li>
                            <li><strong>Mobile-first applications</strong>: Limited processing power</li>
                            <li><strong>Animations for user feedback</strong>: Smooth interactions improve UX</li>
                            <li><strong>Progressive Web Apps</strong>: Need to perform like native apps</li>
                        </ul>
                        <p class="badge">Pro Tip: Use Chrome DevTools ‚Üí Coverage tab to see exactly which CSS is unused!</p>
                    </details>
                </section>

                <!-- 19.3 Core Web Vitals and CSS -->
                <section id="section-19-3">
                    <h2 class="section-title">19.3 Core Web Vitals and CSS</h2>
                    <p class="text-secondary">Core Web Vitals are Google's official metrics for measuring real-user web experience. CSS plays a crucial role in each one.</p>

                    <details>
                        <summary>Syntax: Largest Contentful Paint (LCP) Optimization</summary>
                        <p>LCP measures when the largest content element becomes visible. CSS directly impacts this metric.</p>
                        <pre><code>// ‚úÖ OPTIMAL LCP strategy
&lt;!-- Inline critical CSS for above-the-fold content --&gt;
&lt;style&gt;
/* Hero image container */
.hero-container {
  width: 100vw;
  height: 80vh;
  background-image: url('hero.jpg');
  background-size: cover;
  background-position: center;
}

/* Primary heading */
.hero h1 {
  font-size: 3rem;
  font-weight: 700;
  color: white;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
}

/* CTA button */
.cta-button {
  background-color: #00d1ff;
  color: white;
  padding: 1rem 2rem;
  border-radius: 8px;
  font-weight: 600;
  border: none;
  cursor: pointer;
}
&lt;/style&gt;

&lt;!-- Preload critical resources --&gt;
&lt;link rel="preload" as="image" href="hero.jpg" type="image/jpeg"&gt;
&lt;link rel="preload" as="font" href="heading-font.woff2" type="font/woff2" crossorigin&gt;

&lt;!-- Load non-critical CSS after LCP --&gt;
&lt;link rel="preload" as="style" href="secondary.css" onload="this.onload=null;this.rel='stylesheet'"&gt;</code></pre>
                        <p>Key LCP targets:</p>
                        <ul>
                            <li>Hero images (preload them!)</li>
                            <li>Primary headings</li>
                            <li>CTA buttons</li>
                            <li>Logo elements</li>
                        </ul>
                        <p>Measure LCP with: <code>new PerformanceObserver((entryList) =&gt; { ... })</code></p>
                    </details>

                    <details>
                        <summary>Detail: Cumulative Layout Shift (CLS) Prevention</summary>
                        <p>CLS measures unexpected layout shifts that disrupt user experience. CSS is responsible for 80%+ of CLS issues.</p>
                        <pre><code>// ‚ùå COMMON CAUSES OF CLS
&lt;!-- 1. Images without dimensions --&gt;
&lt;img src="ad.jpg" alt="Ad"&gt;  // Causes shift when loads

&lt;!-- 2. Dynamic content injection --&gt;
&lt;div id="ads"&gt;&lt;/div&gt;  // Ads load later, push content down

&lt;!-- 3. Web fonts causing FOIT/FOUT --&gt;
&lt;!-- Without font-display: swap --&gt;

&lt;!-- 4. Lazy-loaded content without placeholders --&gt;</code></pre>
                        <p>‚úÖ Solutions:</p>
                        <pre><code>// ‚úÖ FIXED: Prevent CLS
&lt;!-- 1. Set explicit dimensions --&gt;
&lt;img src="ad.jpg" alt="Ad" width="300" height="250"&gt;
&lt;!-- OR --&gt;
.ad-container {
  width: 300px;
  height: 250px;
  background-color: #eee;
  display: flex;
  align-items: center;
  justify-content: center;
}

&lt;!-- 2. Reserve space for dynamic content --&gt;
#ads {
  min-height: 200px;
  background-color: #f5f5f5;
}

&lt;!-- 3. Use font-display: swap --&gt;
@font-face {
  font-family: 'MyFont';
  src: url('font.woff2') format('woff2');
  font-display: swap;
}

&lt;!-- 4. Use aspect-ratio for responsive containers --&gt;
.aspect-ratio-box {
  aspect-ratio: 16 / 9;
  background-color: #eee;
}</code></pre>
                        <p>CLS score targets:</p>
                        <ul>
                            <li>Excellent: &lt; 0.1</li>
                            <li>Needs improvement: 0.1 - 0.25</li>
                            <li>Poor: &gt; 0.25</li>
                        </ul>
                        <p>Always test CLS with real user data using Chrome User Experience Report (CrUX).</p>
                    </details>

                    <details>
                        <summary>Syntax: First Input Delay (FID) and CSS</summary>
                        <p>FID measures responsiveness ‚Äî how long it takes for a page to respond to first user interaction.</p>
                        <p>While FID primarily relates to JavaScript, CSS contributes indirectly:</p>
                        <pre><code>// ‚ùå CSS that increases FID
&lt;!-- Large, complex CSS files blocking main thread --&gt;
&lt;link rel="stylesheet" href="huge-stylesheet.css"&gt;

&lt;!-- Unoptimized animations consuming CPU --&gt;
.element {
  transition: all 0.5s ease; /* Animating too many properties */
}

// ‚úÖ CSS that improves FID
&lt;!-- Critical CSS inlined --&gt;
&lt;style&gt;{critical-css}&lt;/style&gt;

&lt;!-- Non-critical CSS async --&gt;
&lt;link rel="preload" as="style" href="non-critical.css" onload="this.onload=null;this.rel='stylesheet'"&gt;

&lt;!-- Efficient animations --&gt;
.element {
  transition: transform 0.3s ease;
  transition: opacity 0.3s ease;
  will-change: transform;
}</code></pre>
                        <p>Key insight: CSS doesn't directly cause FID, but it can delay JavaScript execution by blocking the main thread.</p>
                        <p>How to measure FID:</p>
                        <pre><code>// In your JavaScript
const observer = new PerformanceObserver((list) =&gt; {
  for (const entry of list.getEntries()) {
    console.log('FID:', entry.duration);
  }
});

observer.observe({entryTypes: ['first-input']});</code></pre>
                        <p>FID targets:</p>
                        <ul>
                            <li>Excellent: &lt; 100ms</li>
                            <li>Needs improvement: 100-300ms</li>
                            <li>Poor: &gt; 300ms</li>
                        </ul>
                    </details>

                    <details>
                        <summary>Detail: Measuring and Monitoring CSS Performance</summary>
                        <p>Use these tools to measure CSS performance:</p>
                        <table class="table table-dark table-sm mt-2">
                            <thead>
                                <tr>
                                    <th>Tool</th>
                                    <th>What It Measures</th>
                                    <th>How to Use</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>Chrome DevTools ‚Üí Performance</td><td>Rendering timeline, reflows, paints</td><td>Record during interaction, look for red/green bars</td></tr>
                                <tr><td>Chrome DevTools ‚Üí Coverage</td><td>Unused CSS percentage</td><td>Reload page, see what CSS isn't used</td></tr>
                                <tr><td>Lighthouse</td><td>Core Web Vitals, bundle size</td><td>Run audit ‚Üí check "Diagnostics" section</td></tr>
                                <tr><td>WebPageTest.org</td><td>Waterfall charts, filmstrip view</td><td>Test across locations and devices</td></tr>
                                <tr><td>Chrome UX Report (CrUX)</td><td>Real user metrics</td><td>Check https://chromeuxreport.googleapis.com</td></tr>
                                <tr><td>SpeedCurve</td><td>Continuous monitoring</td><td>Enterprise tool for ongoing tracking</td></tr>
                            </tbody>
                        </table>
                        <p>Set up automated monitoring:</p>
                        <pre><code>// Example CI/CD pipeline check
// package.json
{
  "scripts": {
    "test:performance": "lighthouse http://localhost:3000 --output=json --output-path=lighthouse-report.json"
  }
}

// In CI, fail if LCP &gt; 2.5s or CLS &gt; 0.1
const report = JSON.parse(fs.readFileSync('lighthouse-report.json'));
if (report.categories.performance.score &lt; 0.9) {
  throw new Error('Performance score below threshold!');
}</code></pre>
                        <p>Pro tip: Monitor CSS bundle size ‚Äî aim for under 50KB compressed!</p>
                    </details>

                    <details>
                        <summary>Real-World Case Study: E-commerce Optimization</summary>
                        <div class="example-box">
                            <pre><code>// BEFORE OPTIMIZATION
- CSS bundle size: 180KB
- LCP: 4.8s
- CLS: 0.28
- FID: 320ms
- Mobile load time: 6.2s

// AFTER OPTIMIZATION
- Critical CSS inlined: 8.2KB
- Non-critical CSS async loaded: 45KB
- Font-display: swap applied
- Image dimensions specified
- Unused CSS removed: 90% reduction
- Transform-based animations only

// RESULTS
- CSS bundle size: 53KB (-70%)
- LCP: 1.2s (-75%)
- CLS: 0.05 (-82%)
- FID: 45ms (-86%)
- Mobile load time: 1.8s (-71%)</code></pre>
                        </div>
                        <p>Business impact:</p>
                        <ul>
                            <li>Conversion rate increased by 27%</li>
                            <li>Cart abandonment decreased by 19%</li>
                            <li>Google ranking improved from #12 to #3</li>
                        </ul>
                        <p>Remember: Performance is not a feature ‚Äî it's a fundamental requirement.</p>
                    </details>

                    <details>
                        <summary>Best Practices Summary</summary>
                        <ol>
                            <li><strong>Inline critical CSS</strong> for above-the-fold content</li>
                            <li><strong>Preload key resources</strong> (fonts, hero images)</li>
                            <li><strong>Use font-display: swap</strong> for all web fonts</li>
                            <li><strong>Set explicit dimensions</strong> on all images and ads</li>
                            <li><strong>Use aspect-ratio</strong> for responsive containers</li>
                            <li><strong>Animate only transform and opacity</strong></li>
                            <li><strong>Remove unused CSS</strong> with PurgeCSS</li>
                            <li><strong>Test on slow networks</strong> and low-end devices</li>
                            <li><strong>Monitor continuously</strong> with Lighthouse and CrUX</li>
                            <li><strong>Set performance budgets</strong> (CSS file size, render-blocking resources)</li>
                        </ol>
                        <p class="badge">Final Wisdom: "Fast websites aren't lucky ‚Äî they're engineered." ‚Äî Your CSS should be a precision instrument, not a blunt hammer.</p>
                    </details>
                </section>
            </div>
        </div>
    </div>

    <!-- JavaScript Utilities -->
    <script>
        // Expand/Collapse All
        document.getElementById('expandAll').addEventListener('click', () => {
            document.querySelectorAll('details').forEach(detail => {
                detail.open = true;
            });
        });

        document.getElementById('collapseAll').addEventListener('click', () => {
            document.querySelectorAll('details').forEach(detail => {
                detail.open = false;
            });
        });

        // Toggle TOC Sections
        document.querySelectorAll('.toc-heading').forEach(section => {
            section.addEventListener('click', () => {
                const target = section.getAttribute('data-target');
                const subItems = document.getElementById(target);
                section.classList.toggle('collapsed');
            });
        });

        // Search functionality
        document.getElementById('tocSearch').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const tocItems = document.querySelectorAll('.toc-item');
            
            tocItems.forEach(item => {
                const linkText = item.textContent.toLowerCase();
                if (linkText.includes(searchTerm)) {
                    item.style.display = '';
                } else {
                    item.style.display = 'none';
                }
            });
        });

        // Smooth Scrolling for TOC Links
        document.querySelectorAll('.toc-item a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 80,
                        behavior: 'smooth'
                    });
                    
                    // Highlight active TOC item
                    document.querySelectorAll('.toc-item.active').forEach(el => {
                        el.classList.remove('active');
                    });
                    this.parentElement.classList.add('active');
                }
            });
        });

        // Auto-highlight active section as user scrolls
        window.addEventListener('scroll', () => {
            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('.toc-item a');
            
            let current = '';
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (pageYOffset >= sectionTop - 100) {
                    current = section.id;
                }
            });
            
            navLinks.forEach(link => {
                link.parentElement.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.parentElement.classList.add('active');
                }
            });
        });

        // Syntax highlighting for code blocks
        document.querySelectorAll('pre code').forEach(block => {
            hljs.highlightBlock(block);
        });

        // Add fallback for highlight.js if not loaded
        window.hljs = window.hljs || {
            highlightBlock: (el) => {
                el.classList.add('language-css');
            }
        };
    </script>

    <!-- Optional: Include Highlight.js for better syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</body>
</html>
```