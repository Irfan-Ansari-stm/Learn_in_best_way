<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>15.1 – Error Types and Handling in JavaScript</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
/* ===== Theme ===== */
:root {
  --bg-main:#050816;
  --bg-sidebar:#060b18;
  --accent-cyan:#22d3ee;
  --accent-amber:#fbbf24;
  --text-main:#e5e7eb;
  --text-muted:#9ca3af;
  --border-subtle:#1f2937;
  --code-bg:#020617;
}

body {
  background:var(--bg-main);
  color:var(--text-main);
  font-family:system-ui, sans-serif;
  overflow:hidden;
}

* { box-sizing:border-box; }

/* ===== Layout ===== */
.app { height:100vh; }

.sidebar {
  background:radial-gradient(circle at top left,#0f172a,var(--bg-sidebar));
  border-right:1px solid var(--border-subtle);
  padding:1.2rem 1rem;
  height:100vh;
  overflow-y:auto;
}

.content {
  padding:1.6rem 2rem;
  height:100vh;
  overflow-y:auto;
  background:radial-gradient(circle at top right,#020617,var(--bg-main));
}

.sidebar::-webkit-scrollbar,
.content::-webkit-scrollbar { width:8px; }
.sidebar::-webkit-scrollbar-thumb,
.content::-webkit-scrollbar-thumb {
  background:#1f2937;
  border-radius:10px;
}

/* ===== Sidebar text ===== */
.title {
  font-size:1.5rem;
  color:var(--accent-cyan);
  font-weight:700;
}
.subtitle { color:var(--text-muted); font-size:0.9rem; }
.meta     { color:var(--text-muted); font-size:0.75rem; }

/* ===== TOC ===== */
.toc {
  background:rgba(15,23,42,0.9);
  border:1px solid #1e293b;
  border-radius:0.7rem;
  padding:0.9rem;
  margin-top:1rem;
}

.toc-title { color:var(--accent-amber); font-weight:600; font-size:0.9rem; }

.toc-search input {
  width:100%;
  background:#020617;
  border:1px solid #0f172a;
  font-size:0.78rem;
  border-radius:999px;
  padding:0.2rem 0.6rem;
  color:var(--text-main);
}

.toc ul { list-style:none; padding:0; margin:0; }

.toc a {
  display:flex;
  align-items:center;
  gap:0.4rem;
  color:var(--text-muted);
  border-radius:0.4rem;
  padding:0.2rem 0.4rem;
  font-size:0.8rem;
  text-decoration:none;
}
.toc a:hover { background:#0f172a; color:var(--accent-cyan); }

.toc a.active {
  background:#0a2b3a;
  color:var(--accent-cyan);
}
.toc-dot {
  width:6px;
  height:6px;
  background:#94a3b8;
  border-radius:50%;
}
.toc a.active .toc-dot { background:var(--accent-cyan); }

/* Buttons */
button {
  background:none;
  border:1px solid var(--border-subtle);
  border-radius:999px;
  color:var(--text-muted);
  padding:3px 10px;
  font-size:0.75rem;
}

/* ===== Content ===== */
h1 { color:var(--accent-cyan); font-size:1.6rem; }
h2 { color:var(--accent-amber); font-size:1.1rem; margin-top:1.3rem; }

.summary-box {
  background:rgba(56,189,248,0.15);
  border:1px solid rgba(148,163,184,0.4);
  border-radius:0.8rem;
  padding:0.9rem 1rem;
  margin-bottom:1rem;
}

/* Details */
details {
  background:#0f172a;
  border:1px solid #1e3a8a;
  border-radius:0.7rem;
  padding:0.4rem 0.7rem;
  margin-bottom:0.9rem;
}
details[open] { border-color:#38bdf8; }
summary { cursor:pointer; font-weight:600; color:var(--accent-amber); }

/* Code */
pre {
  background:var(--code-bg);
  border:1px solid #0e7e7e;
  padding:0.8rem;
  border-radius:0.7rem;
  overflow-x:auto;
}
code {
  font-family:"JetBrains Mono", monospace;
  font-size:0.83rem;
}

/* Syntax Highlight */
.token-comment { color:#6b7280; font-style:italic; }
.token-string  { color:#fb923c; }
.token-number  { color:#a855f7; }
.token-keyword { color:#22c55e; font-weight:600; }
.token-builtin { color:#facc15; }
.token-fn      { color:#38bdf8; }
</style>
</head>

<body>

<div class="container-fluid app">
<div class="row flex-nowrap">

<!-- SIDEBAR -->
<div class="col-12 col-md-4 col-lg-3 sidebar">

  <div class="title">15.1 – Error Types & Handling</div>
  <div class="subtitle">Built-in errors, custom errors, stack traces, global handlers</div>
  <div class="meta">Advanced JavaScript • Master/PhD depth</div>

  <div class="toc">
    <div class="toc-title">On this page</div>
    <div class="toc-search"><input id="tocSearch" placeholder="Search..."></div>

    <ul id="tocMenu">
      <li><a href="#builtins" class="toc-link"><span class="toc-dot"></span>15.1.1 Built-in Error Types</a></li>
      <li><a href="#custom-errors" class="toc-link"><span class="toc-dot"></span>15.1.2 Custom Error Classes</a></li>
      <li><a href="#stack" class="toc-link"><span class="toc-dot"></span>15.1.3 Error Properties & Stack Traces</a></li>
      <li><a href="#global" class="toc-link"><span class="toc-dot"></span>15.1.4 Global Error Handling</a></li>
      <li><a href="#promise" class="toc-link"><span class="toc-dot"></span>15.1.5 Unhandled Promise Rejections</a></li>
    </ul>

    <div class="mt-2">
      <button onclick="expandAll()">Expand all</button>
      <button onclick="collapseAll()">Collapse all</button>
    </div>
  </div>

</div>

<!-- CONTENT -->
<div class="col content">

<h1>15.1 – Error Types and Handling in JavaScript</h1>

<div class="summary-box">
<strong>Executive Summary:</strong>  
JavaScript errors are objects that represent unexpected states.  
Built-in error classes model common issues like syntax, type mismatch, missing references, etc.  
Advanced systems rely on custom error hierarchies, stack trace analysis, global error interception,  
and promise rejection handlers to ensure robustness, observability, and safe recovery.
</div>

<!-- 15.1.1 -->
<section id="builtins">
<h2>15.1.1 Built-in Error Types</h2>

<details open>
  <summary>Overview of built-in errors</summary>
  <div class="inner">

<ul>
  <li><strong>Error</strong> – base class</li>
  <li><strong>TypeError</strong> – wrong type of value</li>
  <li><strong>ReferenceError</strong> – accessing variables that don’t exist</li>
  <li><strong>SyntaxError</strong> – invalid JavaScript syntax</li>
  <li><strong>RangeError</strong> – numeric values outside allowed range</li>
  <li><strong>EvalError</strong> – legacy, related to <code>eval()</code></li>
  <li><strong>URIError</strong> – malformed URI functions</li>
  <li><strong>AggregateError</strong> – multiple errors combined (Promise.any)</li>
</ul>

  </div>
</details>

<details>
  <summary>Examples of common errors</summary>
  <div class="inner">

<pre><code>
// TypeError
null.f(); // cannot read property

// ReferenceError
console.log(xyz); // xyz is not defined

// RangeError
new Array(-1);

// SyntaxError
eval("function ()"); // invalid function syntax

// URIError
decodeURI("%"); 
</code></pre>

  </div>
</details>
</section>

<!-- 15.1.2 -->
<section id="custom-errors">
<h2>15.1.2 Custom Error Classes</h2>

<details open>
  <summary>Why create custom errors?</summary>
  <div class="inner">
    <p>Custom error classes:</p>
<ul>
  <li>Represent domain-specific issues</li>
  <li>Improve debugging</li>
  <li>Enable error categorization</li>
  <li>Support structured error handling</li>
</ul>
  </div>
</details>

<details>
  <summary>Creating a custom error class</summary>
  <div class="inner">

<pre><code>
class ValidationError extends Error {
  constructor(message){
    super(message);
    this.name = "ValidationError";
  }
}

throw new ValidationError("Invalid input");
</code></pre>

  </div>
</details>

<details>
  <summary>Error inheritance hierarchy</summary>
  <div class="inner">

<pre><code>
class AppError extends Error {}
class DatabaseError extends AppError {}
class NotFoundError extends AppError {}
</code></pre>

<p>Now you can catch fine-grained or broad categories.</p>

  </div>
</details>

</section>

<!-- 15.1.3 -->
<section id="stack">
<h2>15.1.3 Error Properties & Stack Traces</h2>

<details open>
  <summary>Standard error object structure</summary>
  <div class="inner">

<ul>
  <li><code>name</code></li>
  <li><code>message</code></li>
  <li><code>stack</code></li>
</ul>

<pre><code>
try {
  throw new Error("Boom!");
} catch (err) {
  console.log(err.name);    // "Error"
  console.log(err.message); // "Boom!"
  console.log(err.stack);   // stacktrace
}
</code></pre>

  </div>
</details>

<details>
  <summary>Stack trace anatomy</summary>
  <div class="inner">

<pre><code>
Error: Something broke
    at doTask (main.js:10)
    at run (main.js:20)
    at main.js:30
</code></pre>

<p>Stack traces help identify the call chain leading to the error.</p>

  </div>
</details>

</section>

<!-- 15.1.4 -->
<section id="global">
<h2>15.1.4 Global Error Handling</h2>

<details open>
  <summary>Browser: window.onerror</summary>
  <div class="inner">

<pre><code>
window.onerror = function(msg, url, line, col, err){
  console.log("Global error:", msg);
};
</code></pre>

  </div>
</details>

<details>
  <summary>Browser: window.addEventListener("error")</summary>
  <div class="inner">

<pre><code>
window.addEventListener("error", e =&gt; {
  console.log("Error captured:", e.error);
});
</code></pre>

  </div>
</details>

<details>
  <summary>Node.js: process.on("uncaughtException")</summary>
  <div class="inner">

<pre><code>
process.on("uncaughtException", (err) =&gt; {
  console.error("Uncaught exception:", err);
});
</code></pre>

  </div>
</details>
</section>

<!-- 15.1.5 -->
<section id="promise">
<h2>15.1.5 Unhandled Promise Rejections</h2>

<details open>
  <summary>What is an unhandled rejection?</summary>
  <div class="inner">
<p>When a promise throws or rejects but has no <code>.catch()</code>.</p>

<pre><code>
Promise.reject("fail");
// no catch → unhandled rejection
</code></pre>
  </div>
</details>

<details>
  <summary>Browser global handler</summary>
  <div class="inner">

<pre><code>
window.addEventListener("unhandledrejection", e =&gt; {
  console.log("Unhandled rejection:", e.reason);
});
</code></pre>

  </div>
</details>

<details>
  <summary>Node.js handler</summary>
  <div class="inner">

<pre><code>
process.on("unhandledRejection", err =&gt; {
  console.error("Unhandled promise rejection:", err);
});
</code></pre>

  </div>
</details>

</section>

</div>
</div>
</div>

<script>
// Expand/collapse
function expandAll(){
  document.querySelectorAll("details").forEach(d=>d.open=true);
}
function collapseAll(){
  document.querySelectorAll("details").forEach(d=>d.open=false);
}

// Active TOC highlight
document.addEventListener("DOMContentLoaded", () => {
  const content = document.querySelector(".content");
  const links = [...document.querySelectorAll(".toc-link")];
  const sections = links.map(l=>({link:l, el:document.querySelector(l.getAttribute("href"))}));

  content.addEventListener("scroll", ()=>{
    const y = content.scrollTop;
    let current = null;
    sections.forEach(({link,el})=>{
      if(el.offsetTop - 80 <= y) current = link;
    });
    links.forEach(l=>l.classList.remove("active"));
    if(current) current.classList.add("active");
  });

  // TOC search
  const search = document.getElementById("tocSearch");
  const items = [...document.querySelectorAll("#tocMenu li")];
  search.addEventListener("input", ()=>{
    const q = search.value.toLowerCase();
    items.forEach(li=>{
      li.style.display = li.textContent.toLowerCase().includes(q) ? "" : "none";
    });
  });

  // Syntax highlighting
  const escape = s => s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
  const keywords=["class","return","function","let","const","new","if","else","throw","try","catch"];
  const builtins=["Error","TypeError","SyntaxError","ReferenceError","Promise","window","process"];
  document.querySelectorAll("pre code").forEach(block=>{
    let html = escape(block.textContent);
    html = html.replace(/(\/\/.*?$)/gm,"<span class='token-comment'>$1</span>");
    html = html.replace(/(['\"`].*?['\"`])/g,"<span class='token-string'>$1</span>");
    html = html.replace(/\b(\d+)\b/g,"<span class='token-number'>$1</span>");
    builtins.forEach(b=>html = html.replace(new RegExp("\\b"+b+"\\b","g"),"<span class='token-builtin'>"+b+"</span>"));
    keywords.forEach(k=>html = html.replace(new RegExp("\\b"+k+"\\b","g"),"<span class='token-keyword'>"+k+"</span>"));
    html = html.replace(/([a-zA-Z_]\w*)(?=\()/g,"<span class='token-fn'>$1</span>");
    block.innerHTML = html;
  });

});
</script>

</body>
</html>
